import streamlit as st

st.title("マンション管理業務アプリ: 現場管理業務用")

st.write("##### 動作モード1: 管理業務主任者による回答")
st.write("現場で発生した問題をテキスト入力すると、管理業務主任者の視点から実務的な回答が得られます。")
st.write("##### 動作モード2: マンション管理士による回答")
st.write("現場で発生した問題をテキスト入力すると、マンション管理士の視点から専門的な回答が得られます。")

selected_item = st.radio(
    "回答者を選択してください。",
    ["管理業務主任者", "マンション管理士"]
)

st.divider()

if selected_item == "管理業務主任者":
    input_message = st.text_area(
        label="現場で発生した問題を入力してください。",
        height=150,
        placeholder="例: 共用部分の電球が切れているとの連絡がありました。"
    )

else:
    input_message = st.text_area(
        label="現場で発生した問題を入力してください。",
        height=150,
        placeholder="例: 管理組合の総会で修繕積立金の値上げについて質問がありました。"
    )

if st.button("回答を取得"):
    st.divider()

    if selected_item == "管理業務主任者":
        if input_message:
            st.write("### 📋 管理業務主任者からの回答")
            st.info(f"**ご質問内容:** {input_message}")
            
            # 管理業務主任者による実務的な回答
            response = f"""
**【管理業務主任者の見解】**

ご相談いただいた内容について、実務的な観点から回答いたします。

**対応手順:**
1. まず、問題の緊急性を確認します
2. 管理規約および使用細則を確認します
3. 予算内での対応可否を検討します
4. 必要に応じて理事会への報告を行います

**推奨される対応:**
- 速やかに現場確認を実施してください
- 関係者（居住者・理事会）への連絡を行ってください
- 対応記録を管理台帳に記載してください

**注意事項:**
この問題は通常業務の範囲内で対応可能です。特別な事情がある場合は、マンション管理士への相談も検討してください。

**文字数:** {len(input_message)}文字
            """
            st.markdown(response)

        else:
            st.error("問題内容を入力してから「回答を取得」ボタンを押してください。")

    else:
        if input_message:
            st.write("### 🏢 マンション管理士からの回答")
            st.info(f"**ご質問内容:** {input_message}")
            
            # マンション管理士による専門的な回答
            response = f"""
**【マンション管理士の見解】**

ご相談いただいた内容について、法律的・専門的な観点から回答いたします。

**法的根拠の確認:**
- 区分所有法に基づく検討
- マンション標準管理規約との照合
- 関連法令（建築基準法、消防法等）の確認

**専門的見解:**
- 長期的な視点での影響を考慮する必要があります
- 管理組合の意思決定プロセスを適切に進めてください
- 必要に応じて専門業者への調査依頼を検討してください

**推奨事項:**
- 理事会での十分な協議が必要です
- 総会決議が必要な場合は適切な手続きを踏んでください
- 組合員への丁寧な説明と合意形成を図ってください

**補足:**
複雑な問題や特殊なケースについては、個別の詳細な調査が必要になる場合があります。

**文字数:** {len(input_message)}文字
            """
            st.markdown(response)

        else:
            st.error("問題内容を入力してから「回答を取得」ボタンを押してください。")